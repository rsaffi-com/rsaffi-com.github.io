<!DOCTYPE html>


  
<html itemscope itemtype="https://schema.org/WebPage" class="no-js" lang="en">

<head prefix="og: http://ogp.me/ns#">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="siteBaseUrl" content="https://blog.rsaffi.com/">
    <meta name="author" content="Ricardo Saffi Marques">
    <meta name="description" content="Ricardo Saffi Marques&#39; collection of thoughts">
    <meta name="keywords" content="blog,personal,responsive,pages,posts,multilingual,syntax highlighting">
    <meta name="generator" content="Hugo 0.127.0">
    <title>
        
           
               Create a Windows 10 bootable flashdrive using GRUB &vert; Bits and Nibbles
           
        
    </title>
    <meta itemprop="name" content="Create a Windows 10 bootable flashdrive using GRUB">
    <meta itemprop="description" content="Create a Windows 10 bootable flashdrive using GRUB - Ricardo Saffi Marques&#39; collection of thoughts">
    <meta property="og:site_name" content="Bits and Nibbles">

    <meta property="og:url" content="https://blog.rsaffi.com/2018/09/create-a-windows-10-bootable-flashdrive-using-grub/">
  <meta property="og:site_name" content="Bits and Nibbles">
  <meta property="og:title" content="Create a Windows 10 bootable flashdrive using GRUB">
  <meta property="og:description" content="2022-10-17 update: Just use Ventoy! 😉
DEPRECATED: If you use Linux and need to create a bootable flashdrive with a Windows 10 installer, this tutorial is for you.
This method doesn’t require any third-party software to be installed (like winusb or unetbootin).">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2018-09-29T14:34:02+00:00">
    <meta property="article:modified_time" content="2018-09-29T14:34:02+00:00">


    


    

    
    <link rel="canonical" href="https://blog.rsaffi.com/2018/09/create-a-windows-10-bootable-flashdrive-using-grub/">
    

    
        

    
    <script src="https://blog.rsaffi.com/js/check-theme-prefer.min.ad7372d3b59ddf8b5ed1bb1ac4252eb33234f1c38130995cff1142b0555e94f7.js" integrity="sha256-rXNy07Wd34te0bsaxCUuszI08cOBMJlc/xFCsFVelPc=" crossorigin="anonymous"></script>


    

    



    
    <link id="theme-css" rel="stylesheet" href="https://blog.rsaffi.com/theme.min.4a7adaae74bbfed8a1bc02779a28cb26bed20f704048301344690c44af008313.css" integrity="sha256-SnrarnS7/tihvAJ3mijLJr7SD3BASDATRGkMRK8AgxM=" media="screen" crossorigin="anonymous">



    



    

    
</head>

<body class="bilberry-hugo-theme">
    

    
    <nav>

    <div class="container">
        <ul class="topnav">
            
        </ul>

        
            <div id="search-box" class="search">
                <i class="fas fa-search"></i>
                <input id="search" type="text" placeholder="Search ...">
            </div>
        
    </div>
</nav>


    
    <header>

    <a id="back-to-top-button">
        <i class="fas fa-angle-up"></i>
    </a>

    <div class="container">
        <div class="logo">
            <a href="/" class="logo">
                
                    
                    
                        
                    
                    <img src="https://seccdn.libravatar.org/avatar/1bb96dd3256b994b9403d960da4dc67d?d=mm&size=200" alt="">
                

                <span class="overlay"><i class="fa fa-home"></i></span>
            </a>
        </div>
        <div class="titles">
            <h3 class="title">
                <a href="/">
                    Bits and Nibbles
                </a>
            </h3>

            
        </div>
        <div class="selectors">
          
          <div class="light-dark-mode">
            <button id="light-dark-toggle" class="fa-solid fa-sun"></button>
          </div>
          
          <div class="languages">
            
                
                
                  
                

                
                    <a href="/2018/09/create-a-windows-10-bootable-flashdrive-using-grub/" class="active">en</a>
                
            
                
                

                
                    <a href="/pt/">pt</a>
                
            
            </div>
        
       </div>

        
            <div class="toggler">
        
                <i class="fa fa-bars" aria-hidden="true"></i>
            </div>
    </div>
    </div>
</header>


    <div class="main container">
        
    <div class="article-wrapper u-cf single">
        
            <a class="bubble" href="https://blog.rsaffi.com/2018/09/create-a-windows-10-bootable-flashdrive-using-grub/">
    <i class="fas fa-fw fa-pencil-alt"></i>
</a>

<article class="default article">
    

    <div class="content">
    <h1 class="article-title">
        <a href="https://blog.rsaffi.com/2018/09/create-a-windows-10-bootable-flashdrive-using-grub/">
            Create a Windows 10 bootable flashdrive using GRUB
        </a>
    </h1>

    <div class="meta">
        
            
                <span class="date moment">2018-09-29</span>
            
        

        
            
                <span class="readingTime">3 min read</span>
            
        

        
            <span class="categories">
                
                    
                    
                        <a href="https://blog.rsaffi.com/categories/english/">English</a>
                    
                
            </span>
        

        
            <span class="author">
                
                
                    <a href="https://blog.rsaffi.com/author/ricardo-saffi-marques/">Ricardo Saffi Marques</a>
                
            </span>
        
    </div>

    
        

        <p>2022-10-17 update: Just use <a href="https://www.ventoy.net/en/index.html">Ventoy</a>! 😉</p>
<hr>
<h2 id="deprecated">DEPRECATED:</h2>
<p><del>If you use Linux and need to create a bootable flashdrive with a Windows 10 installer, this tutorial is for you.</del></p>
<p><del>This method doesn’t require any third-party software to be installed (like <code>winusb</code> or <code>unetbootin</code>).</del></p>
<p><del>You will need an 8GB flashdrive (or bigger) to continue. Check if there’s anything in the flashdrive that you need to backup, as this procedure will format it.</del></p>
<p><del><strong>1)</strong> If you don’t already have it, download a copy of Microsoft Windows 10 directly <a href="https://www.microsoft.com/software-download/windows10">from Microsoft’s website</a>.</del></p>
<p><del>Have your activation key in hand for the installation itself (not covered in this tutorial);</del></p>
<p><del><strong>2)</strong> Make sure you have these packages installed. I’m running Debian, so this is the command for that:</del></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo apt-get install coreutils gparted grub-pc-bin ntfs-3g
</span></span></code></pre></div><p><del><strong>3)</strong> After that, open <code>gparted</code> to prepare the flashdrive. Follow the steps on this video. Make sure you’re selecting the right device for your flashdrive (in my case it’s <code>/dev/sde</code> ):</del></p>


    










    <div class="responsive-video local">
        <video width="100%" controls poster="">
            <source src="/2018/09/create-a-windows-10-bootable-flashdrive-using-grub/gparted.mp4" type="video/mp4">

            Your browser does not support the video tag.
        </video>
    </div>






<p><del>It’s basically a 500MB ext4 partition with the bootable flag + a NTFS partition using the rest of the space available.</del></p>
<p><del>The rest of the steps are done on the terminal, so go ahead and open a terminal.</del></p>
<p><del><strong>4)</strong> To make our lives easier, create two shell variables pointing to the correct partitions and one pointing to the file we downloaded on step 1.</del></p>
<p><del>In my case:</del></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>export PART1<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/dev/sde1&#34;</span> <span style="color:#75715e"># this is the boot partition on the flashdrive</span>
</span></span><span style="display:flex;"><span>export PART2<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/dev/sde2&#34;</span> <span style="color:#75715e"># this is the NTFS partition on the flashdrive</span>
</span></span><span style="display:flex;"><span>export ISOFILE<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/home/ricardo/Downloads/iso/Win10_1803_EnglishInternational_x64.iso&#34;</span>
</span></span></code></pre></div><p><del><strong>5)</strong> You will need to mount both partitions as well as the ISO file you downloaded on step 1. Create them:</del></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo mkdir -pv /tmp/<span style="color:#f92672">{</span>part1,part2,iso<span style="color:#f92672">}</span>
</span></span></code></pre></div><p><del><strong>6)</strong> Mount the flashdrive partitions to those folders, respectively:</del></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo mount <span style="color:#e6db74">${</span>PART1<span style="color:#e6db74">}</span> /tmp/part1
</span></span><span style="display:flex;"><span>sudo mount <span style="color:#e6db74">${</span>PART2<span style="color:#e6db74">}</span> /tmp/part2
</span></span></code></pre></div><p><del><strong>7)</strong> Mount the ISO file you downloaded on step 1 (point to the correct path on your filesystem):</del></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo mount -o loop <span style="color:#e6db74">${</span>ISOFILE<span style="color:#e6db74">}</span> /tmp/iso
</span></span></code></pre></div><p><del><strong>8)</strong> Trigger the copy of the files from the ISO file to the flashdrive. This might take a while, depending on the speed of your flashdrive.</del></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo rsync -a /tmp/iso/ /tmp/part2/ <span style="color:#f92672">&amp;&amp;</span> sync
</span></span></code></pre></div><p><del><strong>9)</strong> Install grub to the MBR pointing the root directory to the boot partition:</del></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo grub-install --no-floppy --target<span style="color:#f92672">=</span>i386-pc --recheck --locales<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;en@quot&#34;</span> --themes<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span> --root-directory<span style="color:#f92672">=</span>/tmp/part1 --boot-directory<span style="color:#f92672">=</span>/tmp/part1/grub-boot --install-modules<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;ntldr normal search ntfs&#34;</span> <span style="color:#e6db74">${</span>PART1/1/<span style="color:#e6db74">}</span>
</span></span></code></pre></div><p><del><strong>10)</strong> We need to create the GRUB configuration file. This has to be done as root. This is the easiest way:</del></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo su -
</span></span><span style="display:flex;"><span>cat &amp;gt; /tmp/part1/grub-boot/grub/grub.cfg &amp;lt;&amp;lt; EOF
</span></span><span style="display:flex;"><span>set timeout<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span> set default<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>menuentry <span style="color:#e6db74">&#34;Windows 10 Installer&#34;</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  insmod ntfs
</span></span><span style="display:flex;"><span>  search --set<span style="color:#f92672">=</span>root --file /bootmgr
</span></span><span style="display:flex;"><span>  ntldr /bootmgr
</span></span><span style="display:flex;"><span>  boot
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>EOF
</span></span><span style="display:flex;"><span>exit
</span></span></code></pre></div><p><del><strong>11</strong>**)** That’s it! Now just unmount the flashdrive and ISO file, eject the flashdrive and you’re good to go:</del></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sync <span style="color:#f92672">&amp;&amp;</span> sudo umount /tmp/<span style="color:#f92672">{</span>part1,part2,iso<span style="color:#f92672">}</span> <span style="color:#f92672">&amp;&amp;</span> sudo rmdir /tmp/<span style="color:#f92672">{</span>part1,part2,iso<span style="color:#f92672">}</span>
</span></span></code></pre></div><p><del><strong>12)</strong> Plug the flashdrive to your computer, power it on and choose to boot from the USB:</del></p>


    










    <div class="responsive-video local">
        <video width="100%" controls poster="">
            <source src="/2018/09/create-a-windows-10-bootable-flashdrive-using-grub/VID_20180929_161402.mp4" type="video/mp4">

            Your browser does not support the video tag.
        </video>
    </div>
    
</div>

    
<div class="footer no-tags">


    

    
</div>

</article>

        
    </div>

    
        <div id="comments-container">
            
            

            

            

        </div>
    

    </div>

    
<footer>
    <div class="container">

        
        <div class="recent-posts">
            <strong>Latest posts</strong>
            <ul>
                
                
                    <li>
                        <a href="https://blog.rsaffi.com/2023/02/pao-de-queijo-cheese-bread-a-la-ricardo/">Pão de Queijo/Cheese Bread “a la Ricardo”</a>
                    </li>
                
                    <li>
                        <a href="https://blog.rsaffi.com/2018/09/create-a-windows-10-bootable-flashdrive-using-grub/">Create a Windows 10 bootable flashdrive using GRUB</a>
                    </li>
                
                    <li>
                        <a href="https://blog.rsaffi.com/2017/08/how-to-run-debian-9-1-stretch-with-proprietary-nvidia-driver-and-uvesafb/">Debian 9.1 (stretch) with proprietary nvidia-driver and uvesafb</a>
                    </li>
                
                    <li>
                        <a href="https://blog.rsaffi.com/2015/11/criar-pendrive-ou-hd-externo-bootavel-de-instalador-windows-a-partir-do-linux/">Criar pendrive (ou HD externo) bootável de instalador Windows a partir do Linux</a>
                    </li>
                
            </ul>
        </div>
        

        
        <div class="categories">
            
            <a href="https://blog.rsaffi.com/categories/"><strong>Categories</strong></a>
            

            <ul>
                
                <li>
                
                    <a href="https://blog.rsaffi.com/categories/english/">English (3)</a>
                
                </li>
                
                <li>
                
                    <a href="https://blog.rsaffi.com/categories/howto/">Howto (2)</a>
                
                </li>
                
                <li>
                
                    <a href="https://blog.rsaffi.com/categories/portuguese/">Portuguese (2)</a>
                
                </li>
                
            </ul>
        </div>
        

        <div class="right">
            
            <div class="external-profiles">
                <strong>Social media</strong>
                
                <a href="https://www.rsaffi.com" target="_blank" rel="me"><em class="fa-solid fa-address-card"></em></a>
                
                <a href="https://github.com/rsaffi" target="_blank" rel=""><em class="fab fa-github"></em></a>
                
            </div>
            

            <div class="languages">
                    <strong>Other languages</strong>
                    
                        
                        
                            
                        

                        
                            <a href="/2018/09/create-a-windows-10-bootable-flashdrive-using-grub/" class="active">en</a>
                        
                    
                        
                        

                        
                            <a href="/pt/">pt</a>
                        
                    
                </div>
            

            
            <div class="archive">
                
            </div>
            
        </div>
    </div>
</footer>


<div class="credits">
    <div class="container">
        <div class="copyright">
            <a href="https://www.rsaffi.com" target="_blank">
                &copy;
                
                2024
                
                by Ricardo Saffi Marques
            </a>
            
        </div>
        <div class="author">
            <a href="https://github.com/Lednerb/bilberry-hugo-theme"
                target="_blank">Bilberry Hugo Theme</a>
        </div>
    </div>
</div>


    
  



    

    


    

    

    

    

    

    

    

    



    
    
    



    
    







    
    <script src="https://blog.rsaffi.com/theme.min.038faee11c569eb747e4eb190ff6adca76e2be35dfb046f00c01bec125534fb3.js" integrity="sha256-A4&#43;u4RxWnrdH5OsZD/atynbivjXfsEbwDAG&#43;wSVTT7M=" crossorigin="anonymous"></script>



    



    
        <div id="activate-algolia-search" class="hidden">
  <input type="hidden" id="algolia-search-appId" value="45CEN6X6AT">
  <input type="hidden" id="algolia-search-apiKey" value="16030625f1a4d0dd3b8aefd794fd4cf1">
  <input type="hidden" id="algolia-search-indexName" value="bilberry-hugo-theme">
  <input type="hidden" id="algolia-search-noSearchResults" value="Nothing found.">

  
</div>

    

    
</body>

</html>
